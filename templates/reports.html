{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Reports</h3>
  <div>
    <a href="{{ url_for('reports_pdf', start=start, end=end) }}" class="btn btn-danger me-2">
      <i class="fa fa-file-pdf"></i> Download PDF
    </a>
    <button class="btn btn-primary" onclick="window.print()">
      <i class="fa fa-print"></i> Print
    </button>
  </div>
</div>

  <form method="get" class="row g-2 mb-3">
    <div class="col-md-3">
      <input type="date" name="start" class="form-control" value="{{ start or current_date }}">
    </div>
    <div class="col-md-3">
      <input type="date" name="end" class="form-control" value="{{ end or current_date }}">
    </div>
    <div class="col-md-3">
      <button type="submit" class="btn btn-success w-100">Filter</button>
    </div>
  </form>

  <h5 class="mt-3 text-primary">Income</h5>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Date</th><th>Title</th><th>Amount</th><th>Notes</th>
      </tr>
    </thead>
    <tbody>
      {% for i in incomes %}
      <tr>
        <td>{{ i.date }}</td><td>{{ i.title }}</td><td>{{ i.amount }}</td><td>{{ i.notes }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <p class="fw-bold text-success">Total Income: {{ total_income }}</p>

  <h5 class="mt-4 text-danger">Expense</h5>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Date</th><th>Title</th><th>Amount</th><th>Notes</th>
      </tr>
    </thead>
    <tbody>
      {% for e in expenses %}
      <tr>
        <td>{{ e.date }}</td><td>{{ e.title }}</td><td>{{ e.amount }}</td><td>{{ e.notes }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <p class="fw-bold text-danger">Total Expense: {{ total_expense }}</p>

  <h4 class="mt-3">Final Balance: {{ comp.opening_balance + total_income - total_expense }}</h4>
</div>
{% endblock %}